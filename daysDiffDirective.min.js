(function(){"use strict";var f=1e3,n=60*f,t=60*n,i=24*t,r=7*i,u=4*r,e=12*u,o=function(o,s){var h=Math.abs(s.getTime()-o.getTime()),p=Math.floor(h/e),c,l,a,v,y,w;return h-=p*e,c=Math.floor(h/u),h-=c*u,l=Math.floor(h/r),h-=l*r,a=Math.floor(h/i),h-=a*i,v=Math.floor(h/t),h-=v*t,y=Math.floor(h/n),h-=y*n,w=Math.floor(h/f),[{key:"years",value:p,timeInMilli:e},{key:"months",value:c,timeInMilli:u},{key:"weeks",value:l,timeInMilli:r},{key:"days",value:a,timeInMilli:i},{key:"hours",value:v,timeInMilli:t},{key:"minutes",value:y,timeInMilli:n},{key:"seconds",value:w,timeInMilli:f}]},s='<div><span ng-repeat="unit in dateUnits"><span ng-if="unit.value"><span ng-bind="unit.value + \' \'"><\/span><span ng-switch="unit.key"><span ng-switch-when="years" ng-bind="unit.value === 1 ? innerTrans.year : innerTrans.years"><\/span><span ng-switch-when="months" ng-bind="unit.value === 1 ? innerTrans.month : innerTrans.months"><\/span><span ng-switch-when="weeks" ng-bind="unit.value === 1 ? innerTrans.week : innerTrans.weeks"><\/span><span ng-switch-when="days"> <span ng-bind="unit.value === 1 ? innerTrans.day : innerTrans.days"><\/span><\/span><span ng-switch-when="hours" ng-bind="unit.value === 1 ? innerTrans.hour : innerTrans.hours"><\/span><span ng-switch-when="minutes" ng-bind="unit.value === 1 ? innerTrans.minute : innerTrans.minutes"><\/span><span ng-switch-when="seconds" ng-bind="unit.value === 1 ? innerTrans.second : innerTrans.seconds"><\/span><span ng-switch-default><\/span><\/span><span ng-if="!$last && !((dateUnits.length - $index) === 2)" ng-bind="\', \'"><\/span><span ng-if="(dateUnits.length - $index) === 2" ng-bind="\' \' + innerTrans.and + \' \'"><\/span><\/span><span ng-if="unit.key === \'moments\'" ng-bind="innerTrans.moments"><\/span><\/span><\/div>';angular.module("daysDiffDirective",[]).directive("daysDiff",["$interval","$timeout",function(n,t){return{restrict:"AE",replace:!0,template:s,scope:{ddFrom:"=",ddTo:"=",ddTranslation:"=",ddAmountOfUnits:"="},compile:function(i){return i.replaceWith(this.template),function(i,r){var u,f,h=function(n,t){for(var r=[],i=0;i<n.length;i++)t>0&&n[i].value>0&&(r.push(n[i]),t-=1);return r},c=function(){i.dateUnits=h(o(i.innerDdFrom,i.innerDdTo),i.innerAmountOfUnits);i.dateUnits.length===0&&i.dateUnits.push({key:"moments",value:0,timeInMilli:0})},e=function(){n.cancel(u);i.dateUnits=null},s;r.on("$destroy",function(){e()});i.$watch("ddFrom",function(t){if(t){if(u&&n.cancel(u),angular.isDate(t))i.innerDdFrom=t;else throw new Error("dd-from is not a date object",t);i.ddTo||(i.innerDdTo=new Date,f=!0)}else if(i.ddTo)i.innerDdFrom=new Date,f=!0;else{e();throw new Error("days-diff element needs dd-from and/or dd-to on the same element");}},!0);i.$watch("ddTo",function(t){if(t){if(u&&n.cancel(u),angular.isDate(t))i.innerDdTo=t;else{e();throw new Error("dd-from is not a date object "+t);}i.ddFrom||(i.innerDdFrom=new Date,f=!0)}else if(i.ddFrom)i.innerDdTo=new Date,f=!0;else{e();throw new Error("days-diff element needs dd-from and/or dd-to on the same element");}},!0);i.$watch("ddAmountOfUnits",function(n){if(n)if(angular.isNumber(i.ddAmountOfUnits))i.innerAmountOfUnits=i.ddAmountOfUnits,f=!0;else{var t=parseInt(i.ddAmountOfUnits);if(isNaN(t)){e();throw new Error("your ddAmountOfUnits is not a number: "+i.ddAmountOfUnits+" (parsed: "+t+")");}else if(t>7){e();throw new Error("amount of units should not be bigger than 7 (1:yrs,2:mths,3:wks,4:dys,5:hrs,6:mins,7:secs), you set it to "+t);}else if(t<0){e();throw new Error("amount of units should not be smaller than 7 (1:yrs,2:mths,3:wks,4:dys,5:hrs,6:mins,7:secs), you set it to "+t);}else i.innerAmountOfUnits=t,f=!0}else i.innerAmountOfUnits=3,f=!0},!0);i.$watch("ddTranslation",function(n){var t=angular.copy(n);t.and||(t.and="and");t.year||(t.year="year");t.years||(t.years="years");t.month||(t.month="month");t.months||(t.months="months");t.week||(t.week="week");t.weeks||(t.weeks="weeks");t.day||(t.day="day");t.days||(t.days="days");t.hour||(t.hour="hour");t.hours||(t.hours="hours");t.minute||(t.minute="minute");t.minutes||(t.minutes="minutes");t.second||(t.second="second");t.seconds||(t.seconds="seconds");t.moments||(t.moments="moments");i.innerTrans=t},!0);s=function(){if(!i.ddTo||!i.ddFrom){u&&n.cancel(u);var f=h(o(i.innerDdFrom,i.innerDdTo),i.innerAmountOfUnits),r=f[f.length-1];if(!r){t(function(){i.ddTo?i.ddFrom||(i.innerDdFrom=new Date):i.innerDdTo=new Date;s()},1e3);return}if(i.ddTo||i.ddFrom)i.ddTo?i.ddFrom||(u=n(function(){i.innerDdFrom=new Date},r.timeInMilli)):u=n(function(){i.innerDdTo=new Date},r.timeInMilli);else{e();throw new Error("days-diff element needs dd-from and/or dd-to on the same element");}}};i.$watchGroup(["innerDdFrom","innerDdTo","innerAmountOfUnits","innerTrans"],function(n){n[0]&&n[1]&&n[2]&&n[3]&&(c(),f&&(s(),f=!1))},!0)}}}}])})();
